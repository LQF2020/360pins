/*! Authur: Qifu LU
    Created Date: 7/12/2020
    Contact: qifu1995@gmail.com
    This JS script is used to create 360 pins image a second.
*/
function FullViewer({$img_wrapper:t,$first_display_img:e,srcFolder:n,totalImgNum:i}){const o=this;this.targetImgIndex=0,this.currImgIndex=0,this.$image_wrapper=t,this.$first_display_img=e,this.totalImgNum=i;const m=function(t){return(t||event).clientX},u=function(){const t=document.documentElement,e=document.getElementsByTagName("body")[0];return window.innerWidth||t.clientWidth||e.clientWidth};this.calculateMouseMove=function(t){let e=m()-t;if(0===e)return;let n=Math.ceil(this.totalImgNum*e/u()),i=this.currImgIndex-n;this.targetImgIndex=i>0?i%this.totalImgNum:(i+this.totalImgNum)%this.totalImgNum},this.doAnimate=function(t){this.calculateMouseMove(t),[].slice.call(o.$image_wrapper.getElementsByTagName("img"),0).forEach(((t,e)=>{e===this.targetImgIndex?t.style.opacity="1":t.style.opacity="0"}))},this.init=function(){for(let t=1;t<this.totalImgNum+1;t++){let e=document.createElement("img");e.src=`${n}/${t}.png`,this.$image_wrapper.appendChild(e)}this.$image_wrapper.style.opacity="1"},this.$image_wrapper.onmousedown=function(){let t=m();document.onmousemove=function(e){o.$first_display_img.style.opacity="0",o.doAnimate(t)},document.onmouseup=function(){o.currImgIndex=o.targetImgIndex,document.onmousemove=null,document.onmouseup=null}},this.$image_wrapper.ontouchstart=function(){let t=m();document.ontouchmove=function(e){o.$first_display_img.style.opacity="0",o.doAnimate(t)},document.ontouchend=function(){o.currImgIndex=o.targetImgIndex,document.ontouchmove=null,document.ontouchend=null}}}
